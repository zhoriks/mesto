!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t,o){},function(e,t,o){"use strict";o.r(t);o(0);class n{constructor(e,t){this.name=e,this.link=t,this.remove=this.remove.bind(this),this.cardElement=this.create(),this.cardElement.querySelector(".place-card__like-icon").addEventListener("click",this.like),this.cardElement.querySelector(".place-card__delete-icon").addEventListener("click",this.remove)}create(){const e=`background-image: url(${this.link})`,t=document.createElement("div");t.classList.add("place-card");const o=document.createElement("div");o.classList.add("place-card__image");const n=document.createElement("button");n.classList.add("place-card__delete-icon");const r=document.createElement("div");r.classList.add("place-card__description");const i=document.createElement("h3");i.classList.add("place-card__name");const a=document.createElement("div");a.classList.add("place-card__description-column");const d=document.createElement("button");d.classList.add("place-card__like-icon");const s=document.createElement("div");return s.classList.add("place-card__like-counter"),r.appendChild(i),r.appendChild(a),a.appendChild(d),a.appendChild(s),o.appendChild(n),t.appendChild(o),t.appendChild(r),i.textContent=this.name,o.setAttribute("style",e),t}like(e){e.target.classList.toggle("place-card__like-icon_liked")}remove(e){this.cardElement.remove()}}const r=document.forms.new,i=document.forms.edit,a=r.elements.name,d=document.querySelector(".popup__button"),s=i.elements.fullname,u=i.elements.aboutme;class c{constructor(e){this.container=e,this.validation()}open(e){this.container.classList.add(`${e}_is-opened`)}close(e){this.container.classList.remove(`${e}_is-opened`)}validation(){r.addEventListener("input",(function(e){0===a.value.length||0===addLink.value.length?(d.setAttribute("disabled",!0),d.classList.add("popup__button_disabled")):(d.removeAttribute("disabled"),d.classList.remove("popup__button_disabled"))})),i.addEventListener("input",(function(e){0===s.value.length||0===u.value.length||1===s.value.length||1===u.value.length?(popupEditAddCardButton.setAttribute("disabled",!0),popupEditAddCardButton.classList.add("popup__button_disabled")):(popupEditAddCardButton.removeAttribute("disabled"),popupEditAddCardButton.classList.remove("popup__button_disabled"))})),""===a.value?(d.setAttribute("disabled",!0),d.classList.add("popup__button_disabled")):(d.removeAttribute("disabled"),d.classList.remove("popup__button_disabled")),s.addEventListener("input",(function(){const e=document.querySelector(".popup-edit__fullname-error_required"),t=document.querySelector(".popup-edit__fullname-error_length"),o=i.fullname.validity;!1===o.valueMissing?e.classList.remove("popup-edit__fullname-error_add"):e.classList.add("popup-edit__fullname-error_add"),!1===o.tooShort?t.classList.remove("popup-edit__fullname-error_add"):t.classList.add("popup-edit__fullname-error_add")})),u.addEventListener("input",(function(){const e=document.querySelector(".popup-edit__aboutme-error_required"),t=document.querySelector(".popup-edit__aboutme-error_length"),o=i.aboutme.validity;!1===o.valueMissing?e.classList.remove("popup-edit__aboutme-error_add"):e.classList.add("popup-edit__aboutme-error_add"),!1===o.tooShort?t.classList.remove("popup-edit__aboutme-error_add"):t.classList.add("popup-edit__aboutme-error_add")}))}}o.d(t,"api",(function(){return S}));const l=document.querySelector(".user-info__button"),p=document.querySelector(".popup__close"),m=document.forms.new,_=(m.elements.link,m.elements.name,document.querySelector(".user-info__button_edit")),h=document.querySelector(".popup-edit__close"),f=(document.querySelector(".popup-edit__button"),document.forms.edit),b=(document.querySelector(".places-list"),document.querySelector(".popup-photo__image")),v=document.querySelector(".popup-photo__close"),y=(document.querySelector(".popup__button"),document.querySelector(".popup-edit__button"),f.elements.fullname),L=f.elements.aboutme,k=document.querySelector(".user-info__name"),g=document.querySelector(".user-info__job"),S=new class{constructor(e,t){this.url=e,this.token=t}getCards(){return fetch(`${this.url}/cards`,{headers:{authorization:this.token}}).then(e=>e.ok?e.json():Promise.reject(e.status)).catch(e=>{console.log(`Ошибка: ${e}`)})}informationAboutMe(){return fetch(`${this.url}/users/me`,{headers:{authorization:this.token}}).then(e=>e.ok?e.json():Promise.reject(e.status)).catch(e=>{console.log(`Ошибка: ${e}`)})}addCard(){return fetch(`${this.url}/cards`,{method:"POST",headers:{authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({name:addName.value,link:addLink.value})}).then(e=>e.ok?e.json():Promise.reject(e.status)).catch(e=>{console.log(`Ошибка: ${e}`)})}editInformationAboutMe(){return fetch(`${this.url}/users/me`,{method:"PATCH",headers:{authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({name:fullNameInput.value,about:aboutMeInput.value})}).then(e=>e.ok?e.json():Promise.reject(e.status)).catch(e=>{console.log(`Ошибка: ${e}`)})}likesCounter(){return fetch(`${this.url}/cards`,{headers:{authorization:this.token}}).then(e=>e.ok?e.json():Promise.reject(e.status))}}("https://praktikum.tk/cohort2","ba6f616a-7f07-4a53-991f-9de8753974a0"),E=new class{constructor(e){this.container=e,this.render()}addCard(e,t){const{cardElement:o}=new n(e,t);this.container.appendChild(o)}render(){S.getCards().then(e=>{for(let t=0;t<e.length;t++)this.addCard(e[t].name,e[t].link)})}}(document.querySelector(".places-list")),C=new c(document.querySelector(".popup")),q=new c(document.querySelector(".popup-photo")),j=new c(document.querySelector(".popup-edit"));S.informationAboutMe().then(e=>{e.name&&e.about&&(k.textContent=e.name,g.textContent=e.about)}),l.addEventListener("click",(function(){C.open("popup")})),p.addEventListener("click",(function(){C.close("popup")})),document.forms.new.addEventListener("submit",(function(e){e.preventDefault(),S.addCard().then(e=>{console.log(e),E.addCard(e.name,e.link),C.close("popup")})})),_.addEventListener("click",(function(){y.setAttribute("value",k.textContent),L.setAttribute("value",g.textContent),j.open("popup-edit")})),h.addEventListener("click",(function(){j.close("popup-edit")})),f.addEventListener("submit",(function(e){e.preventDefault(),S.editInformationAboutMe().then(e=>{k.textContent=e.name,g.textContent=e.about}),j.close("popup-edit")})),v.addEventListener("click",(function(){q.close("popup-photo")})),document.querySelector(".places-list").addEventListener("click",(function(e){if(!0===e.target.classList.contains("place-card__image")){q.open("popup-photo");const t=e.target.getAttribute("style").slice(22,-1);b.setAttribute("src",t)}}))}]);